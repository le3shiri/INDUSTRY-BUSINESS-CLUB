<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluxence - Negotiations</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/negotiations.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

    <div class="layout-dashboard">
        <aside class="sidebar">
            <!-- Reused Sidebar -->
            <div class="sidebar-header">
                <svg class="sidebar-logo" viewBox="0 0 100 100" fill="none">
                    <circle cx="50" cy="50" r="45" stroke="#5dbee8" stroke-width="8" />
                    <path d="M35 50L45 60L65 40" stroke="#336c41" stroke-width="8" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
                <h2 style="font-size: 1.25rem; font-weight: 800; color: var(--text-primary); margin: 0;">Fluxence</h2>
            </div>
            <nav class="nav-links">
                <a href="dashboard.html" class="nav-item"><i class="fas fa-home"></i> <span>Dashboard</span></a>
                <a href="search.html" class="nav-item"><i class="fas fa-search"></i> <span>Search</span></a>
                <a href="create-listing-step1.html" class="nav-item"><i class="fas fa-box-open"></i> <span>Sell
                        Items</span></a>
                <a href="negotiations.html" class="nav-item active"><i class="fas fa-handshake"></i>
                    <span>Deals</span></a>
                <a href="#" class="nav-item"><i class="fas fa-user-circle"></i> <span>Profile</span></a>
            </nav>
        </aside>

        <main class="main-content">
            <header style="margin-bottom: 2rem;">
                <h1 style="font-size: 1.75rem; font-weight: 800; margin-bottom: 1.5rem;">Negotiations</h1>

                <div class="negotiation-tabs">
                    <div class="tab-pill active" onclick="switchTab('buying')" id="pill-buying">Buying (2)</div>
                    <div class="tab-pill" onclick="switchTab('selling')" id="pill-selling">Selling (1)</div>
                </div>
            </header>

            <!-- Buying List -->
            <div id="buying-list" class="fade-in-up">
                <!-- Items injected by JS -->
            </div>

            <!-- Selling List -->
            <div id="selling-list" class="fade-in-up" style="display: none;">
                <!-- Items injected by JS -->
            </div>

        </main>
    </div>

    <script src="js/app.js"></script>
    <script>
        // Mock Data
        const negotiations = [
            {
                id: 1,
                role: 'buyer',
                title: '50 Tons of Portland Cement',
                status: 'pending',
                lastOffer: 115000,
                listPrice: 120000,
                icon: 'fa-cube'
            },
            {
                id: 2,
                role: 'buyer',
                title: 'Copper Wiring Scraps (Lot)',
                status: 'accepted',
                lastOffer: 45000,
                listPrice: 45000,
                icon: 'fa-bolt'
            },
            {
                id: 3,
                role: 'seller',
                title: 'Aluminum Blocks',
                status: 'pending',
                lastOffer: 12500,
                listPrice: 13000,
                icon: 'fa-layer-group'
            }
        ];

        function renderList() {
            const buyList = document.getElementById('buying-list');
            const sellList = document.getElementById('selling-list');

            buyList.innerHTML = '';
            sellList.innerHTML = '';

            negotiations.forEach(neg => {
                const card = `
                <a href="negotiation-room.html?role=${neg.role}&id=${neg.id}" class="negotiation-card">
                    <div class="neg-thumb"><i class="fas ${neg.icon} fa-2x"></i></div>
                    <div class="neg-info">
                        <h3 style="font-size: 1.1rem; font-weight: 700; margin: 0 0 0.5rem 0;">${neg.title}</h3>
                        <div style="font-size: 0.9rem; color: var(--text-secondary); display: flex; gap: 1.5rem;">
                            <span>${neg.role === 'buyer' ? 'My Offer' : 'Received Offer'}: <strong style="color: var(--primary-color);">${neg.lastOffer.toLocaleString()} MAD</strong></span>
                            <span>Listing: ${neg.listPrice.toLocaleString()} MAD</span>
                        </div>
                    </div>
                    <span class="neg-status status-${neg.status}">${neg.status}</span>
                    <i class="fas fa-chevron-right" style="color: var(--border-color); margin-left: 1rem;"></i>
                </a>
              `;

                if (neg.role === 'buyer') buyList.innerHTML += card;
                else sellList.innerHTML += card;
            });
        }

        function switchTab(type) {
            document.querySelectorAll('.tab-pill').forEach(p => p.classList.remove('active'));
            document.getElementById('pill-' + type).classList.add('active');

            if (type === 'buying') {
                document.getElementById('buying-list').style.display = 'block';
                document.getElementById('selling-list').style.display = 'none';
            } else {
                document.getElementById('buying-list').style.display = 'none';
                document.getElementById('selling-list').style.display = 'block';
            }
        }

        // Init
        renderList();
    </script>
</body>

</html>